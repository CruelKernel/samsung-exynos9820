/*
 * MFC_charger.h
 * Samsung MFC Charger Header
 *
 * Copyright (C) 2015 Samsung Electronics, Inc.
 *
 * This software is licensed under the terms of the GNU General Public
 * License version 2, as published by the Free Software Foundation, and
 * may be copied, distributed, and modified under those terms.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 */

#ifndef __WIRELESS_CHARGER_MFC_H
#define __WIRELESS_CHARGER_MFC_H __FILE__

#include <linux/mfd/core.h>
#include <linux/regulator/machine.h>
#include <linux/i2c.h>
#include <linux/alarmtimer.h>
#include "../sec_charging_common.h"

#define MFC_FW_BIN_VERSION			0x134
#define MFC_FW_BIN_FULL_VERSION		0x01340000
#define MFC_FW_BIN_VERSION_ADDR		0x0084 //fw rev85 address
#define MTP_MAX_PROGRAM_SIZE 0x4000
#define MTP_VERIFY_ADDR			0x0000
#define MTP_VERIFY_SIZE			0x4680
#define MTP_VERIFY_CHKSUM		0xABF6

#define MFC_FLASH_FW_HEX_PATH		"mfc/mfc_fw_flash.bin"
#define MFC_FW_SDCARD_BIN_PATH		"/sdcard/mfc_fw_flash.bin"

#define MFC_FW_BIN_LSI_VERSION			0x1004
#define MFC_FLASH_FW_HEX_LSI_PATH		"mfc/mfc_fw_flash_lsi.bin"

/* REGISTER MAPS */
#define MFC_CHIP_ID_L_REG					0x00
#define MFC_CHIP_ID_H_REG					0x01
#define MFC_CHIP_REVISION_REG				0x02
#define MFC_CUSTOMER_ID_REG					0x03
#define MFC_FW_MAJOR_REV_L_REG				0x04
#define MFC_FW_MAJOR_REV_H_REG				0x05
#define MFC_FW_MINOR_REV_L_REG				0x06
#define MFC_FW_MINOR_REV_H_REG				0x07
#define MFC_PRMC_ID_L_REG					0x0A
#define MFC_PRMC_ID_H_REG					0x0B
/* RXID BIT[0:47] */
#define MFC_WPC_RXID_0_REG					0x10
#define MFC_WPC_RXID_1_REG					0x11
#define MFC_WPC_RXID_2_REG					0x12
#define MFC_WPC_RXID_3_REGs					0x13
#define MFC_WPC_RXID_4_REG					0x14
#define MFC_WPC_RXID_5_REG					0x15

#define MFC_STATUS_L_REG					0x20
#define MFC_STATUS_H_REG					0x21
#define MFC_INT_A_L_REG						0x22
#define MFC_INT_A_H_REG						0x23
#define MFC_INT_A_ENABLE_L_REG				0x24
#define MFC_INT_A_ENABLE_H_REG				0x25
#define MFC_INT_A_CLEAR_L_REG				0x26
#define MFC_INT_A_CLEAR_H_REG				0x27
#define MFC_INT_B_REG						0x28
#define MFC_INT_B_ENABLE_REG				0x29
#define MFC_INT_B_CLEAR_REG					0x2A

#define MFC_SYS_OP_MODE_REG					0x2B
#define MFC_BATTERY_CHG_STATUS_REG			0x3A
#define MFC_EPT_REG							0x3B /* EPT(End of Power Transfer) cases. PMA has only EOC case */
#define MFC_ADC_VOUT_L_REG					0x3C
#define MFC_ADC_VOUT_H_REG					0x3D
#define MFC_VOUT_SET_REG					0x3E
#define MFC_VRECT_ADJ_REG					0x3F
#define MFC_ADC_VRECT_L_REG					0x40
#define MFC_ADC_VRECT_H_REG					0x41
#define MFC_TX_IUNO_LIMIT_L_REG				0x42
#define MFC_TX_IUNO_LIMIT_H_REG				0x43
#define MFC_ADC_IOUT_L_REG				0x44
#define MFC_ADC_IOUT_H_REG				0x45
#define MFC_ADC_DIE_TEMP_L_REG				0x46 /* 8 LSB field is used, Celsius */
#define MFC_ADC_DIE_TEMP_H_REG				0x47 /* only 4 MSB[3:0] field is used, Celsius */
#define MFC_TRX_OP_FREQ_L_REG				0x48 /* kHZ */
#define MFC_TRX_OP_FREQ_H_REG				0x49 /* kHZ */
#define MFC_RX_PING_FREQ_L_REG				0x4A /* kHZ */
#define MFC_RX_PING_FREQ_H_REG				0x4B /* kHZ */
#define MFC_ILIM_SET_REG					0x4C /* ILim =  value * 0.1(A) + 0.1(A) */

#define MFC_AP2MFC_CMD_L_REG				0x4E
#define MFC_AP2MFC_CMD_H_REG				0x4F

/********************************************************************************/
/* Below register are functionally depends on the operation mode(TX or RX mode) */
/* RX mode */
#define MFC_WPC_PCKT_HEADER_REG				0x50
#define MFC_WPC_RX_DATA_COM_REG				0x51 /* WPC Rx to Tx COMMAND */
#define MFC_WPC_RX_DATA_VALUE0_REG			0x52
#define MFC_WPC_RX_DATA_VALUE1_REG			0x53
#define MFC_WPC_RX_DATA_VALUE2_REG			0x54
#define MFC_WPC_RX_DATA_VALUE3_REG			0x55
#define MFC_PMA_RX_ADVT_CS_REG				0x56 /* PMA Advertisement Reg, 4MSB[3:0] Checksum */
#define MFC_PMA_RX_ADVT_MSG_REG				0x57 /* PMA Advertisement Reg, Message */

/* TX mode */
#define MFC_WPC_TX_DATA_COM_REG				0x50 /* WPC Tx to Rx COMMAND */
#define MFC_WPC_TX_DATA_VALUE0_REG			0x51
#define MFC_WPC_TX_DATA_VALUE1_REG			0x52
#define MFC_WPC_TX_DATA_VALUE2_REG			0x53

/* Common */
#define MFC_WPC_TRX_DATA2_COM_REG				0x58
#define MFC_WPC_TRX_DATA2_VALUE0_REG			0x59
#define MFC_WPC_TRX_DATA2_VALUE1_REG			0x5A
/********************************************************************************/

#define MFC_TX_IUNO_OFFSET_L_REG				0x62
#define MFC_TX_IUNO_OFFSET_H_REG				0x63

#define MFC_TX_OC_FOD1_LIMIT_L_REG				0x64
#define MFC_TX_OC_FOD1_LIMIT_H_REG				0x65
#define MFC_TX_OC_FOD2_LIMIT_L_REG				0x66
#define MFC_TX_OC_FOD2_LIMIT_H_REG				0x67

#define MFC_WPC_TX_DATA_VALUE1_REG			0x52
#define MFC_WPC_TX_DATA_VALUE2_REG			0x53


#define MFC_STARTUP_EPT_COUNTER					0x68
#define MFC_VUNO_REG							0xC8

#define MFC_WPC_TX_IOUT_GAIN_REG			0x9E
#define MFC_WPC_TX_IOUT_OFFSET_REG			0x9F

#define MFC_TX_DUTY_CYCLE					0xE6 /* default 0x80(50%) */

/* TX Digital Ping Frequency = 60 MHz/value, default is 148kHz (60MHz/0x196=148) */
#define MFC_TX_PING_FREQ_L_REG				0xD0 /* default 0x96 */
#define MFC_TX_PING_FREQ_H_REG				0xD1 /* default 0x01 */
/* TX Mode Minimum Duty Setting Register, Min_Duty, default is 20% (20%/0x33=51/256=0.199) */
#define MFC_TX_MIN_DUTY_SETTING_REG			0xD3 /* default 0x33 */
/* TX Min Operating Frequency = 60 MHz/value, default is 110kHz (60MHz/0x222=110) */
#define MFC_TX_MIN_OP_FREQ_L_REG			0xD4 /* default 0x22 */
#define MFC_TX_MIN_OP_FREQ_H_REG			0xD5 /* default 0x02 */
/* TX Max Operating Frequency = 60 MHz/value, default is 148kHz (60MHz/0x196=148) */
#define MFC_TX_MAX_OP_FREQ_L_REG			0xD6 /* default 0x96 */
#define MFC_TX_MAX_OP_FREQ_H_REG			0xD7 /* default 0x01 */

/* RX Mode Communication Modulation FET Ctrl */
#define MFC_MST_MODE_SEL_REG				0x69
#define MFC_RX_OV_CLAMP_REG					0x6A
#define MFC_RX_COMM_MOD_AFC_FET_REG			0x37
#define MFC_RX_COMM_MOD_FET_REG				0x6B

#define MFC_WPC_FOD_0A_REG					0x70
#define MFC_WPC_FOD_0B_REG					0x71
#define MFC_WPC_FOD_1A_REG					0x72
#define MFC_WPC_FOD_1B_REG					0x73
#define MFC_WPC_FOD_2A_REG					0x74
#define MFC_WPC_FOD_2B_REG					0x75
#define MFC_WPC_FOD_3A_REG					0x76
#define MFC_WPC_FOD_3B_REG					0x77
#define MFC_WPC_FOD_4A_REG					0x78
#define MFC_WPC_FOD_4B_REG					0x79
#define MFC_WPC_FOD_5A_REG					0x7A
#define MFC_WPC_FOD_5B_REG					0x7B

#define MFC_PMA_FOD_0A_REG					0x80
#define MFC_PMA_FOD_0B_REG					0x81
#define MFC_PMA_FOD_1A_REG					0x82
#define MFC_PMA_FOD_1B_REG					0x83
#define MFC_PMA_FOD_2A_REG					0x84
#define MFC_PMA_FOD_2B_REG					0x85
#define MFC_PMA_FOD_3A_REG					0x86
#define MFC_PMA_FOD_3B_REG					0x87
#define MFC_PMA_FOD_4A_REG					0x88
#define MFC_PMA_FOD_4B_REG					0x89
#define MFC_PMA_FOD_5A_REG					0x8A
#define MFC_PMA_FOD_5B_REG					0x8B

#define MFC_FW_DATA_CODE_0					0xB0
#define MFC_FW_DATA_CODE_1					0xB1
#define MFC_FW_DATA_CODE_2					0xB2
#define MFC_FW_DATA_CODE_3					0xB3
#define MFC_FW_DATA_CODE_4					0xB4
#define MFC_FW_DATA_CODE_5					0xB5
#define MFC_FW_DATA_CODE_6					0xB6
#define MFC_FW_DATA_CODE_7					0xB7
#define MFC_FW_DATA_CODE_8					0xB8
#define MFC_FW_DATA_CODE_9					0xB9
#define MFC_FW_DATA_CODE_A					0xBA
/* Timer code contains ASCII value. (ex. 31 means '1', 3A means ':') */
#define MFC_FW_TIMER_CODE_0					0xC0
#define MFC_FW_TIMER_CODE_1					0xC1
#define MFC_FW_TIMER_CODE_2					0xC2
#define MFC_FW_TIMER_CODE_3					0xC3
#define MFC_FW_TIMER_CODE_4					0xC4
#define MFC_FW_TIMER_CODE_5					0xC5
#define MFC_FW_TIMER_CODE_6					0xC6
#define MFC_FW_TIMER_CODE_7					0xC7

#define MFC_RPP_SCALE_COEF_REG					0xF0
/* Parameter 1: Major and Minor Version */
#define MFC_TX_RXID1_READ_REG					0xF2
/* Parameter 2~3: Manufacturer Code */
#define MFC_TX_RXID2_READ_REG					0xF3
#define MFC_TX_RXID3_READ_REG					0xF4
/* Parameter 4~10: Basic Device Identifier */
#define MFC_TX_RXID4_READ_REG					0xF5
#define MFC_TX_RXID5_READ_REG					0xF6
#define MFC_TX_RXID6_READ_REG					0xF7
#define MFC_TX_RXID7_READ_REG					0xF8
#define MFC_TX_RXID8_READ_REG					0xF9
#define MFC_TX_RXID9_READ_REG					0xFA
#define MFC_TX_RXID10_READ_REG					0xFB

/* Target Vrect is ReadOnly register, and updated by every 10ms
	Its default value is 0x1A90(6800mV).
	Target_Vrect (Iout,Vout) = {Vout + 0.05} + { Vrect(Iout,5V)-Vrect(1A,5V) } * 5/9
	*/
#define MFC_TARGET_VRECT_L_REG				0x015B /* default 0x90 */
#define MFC_TARGET_VRECT_H_REG				0x015C /* default 0x1A */

#define MFC_RX_CEP_PACKET_COUNTER0			0x029C
#define MFC_RX_CEP_PACKET_COUNTER1			0x029D
#define MFC_RX_CEP_PACKET_COUNTER2			0x029E
#define MFC_RX_CEP_PACKET_COUNTER3			0x029F
#define MFC_RX_RPP_PACKET_COUNTER0			0x02A0
#define MFC_RX_RPP_PACKET_COUNTER1			0x02A1
#define MFC_RX_RPP_PACKET_COUNTER2			0x02A2
#define MFC_RX_RPP_PACKET_COUNTER3			0x02A3
#define MFC_RX_CSP_PACKET_COUNTER0			0x02A4
#define MFC_RX_CSP_PACKET_COUNTER1			0x02A5
#define MFC_RX_CSP_PACKET_COUNTER2			0x02A6
#define MFC_RX_CSP_PACKET_COUNTER3			0x02A7
#define MFC_RX_PPP_PACKET_COUNTER0			0x02A8
#define MFC_RX_PPP_PACKET_COUNTER1			0x02A9
#define MFC_RX_PPP_PACKET_COUNTER2			0x02AA
#define MFC_RX_PPP_PACKET_COUNTER3			0x02AB

/* ADT Buffer Registers, (0x0800 ~ 0x0FFF) */
#define MFC_ADT_BUFFER_ADT_TYPE_REG				0x0800
#define MFC_ADT_BUFFER_ADT_MSG_SIZE_REG			0x0801
#define MFC_ADT_BUFFER_ADT_PARAM_REG			0x0804
#define MFC_ADT_BUFFER_ADT_PARAM_MAX_REG		0x0FFF

/* System Operating Mode Register, Sys_Op_Mode (0x2B) */
#define PAD_MODE_MISSING			0
#define PAD_MODE_WPC_BASIC			1
#define PAD_MODE_WPC_ADV			2
#define PAD_MODE_PMA_SR1			3
#define PAD_MODE_PMA_SR1E			4
#define PAD_MODE_UNKNOWN			5

/* MFC_RX_DATA_COM_REG (0x51) : RX Data Command VALUE of 0x19 PPP Heaader */
#define	WPC_COM_CLEAR_PACKET_COUNTING		0x01
#define	WPC_COM_START_PACKET_COUNTING		0x02
#define	WPC_COM_DISABLE_PACKET_COUNTING		0x03

/* RX Data Value1 Register (Data Sending), RX_Data_VALUE1_Out (0x51) : Function and Description */
#define	WPC_COM_UNKNOWN					0x00
#define	WPC_COM_TX_ID					0x01
#define	WPC_COM_CHG_STATUS				0x05
#define	WPC_COM_AFC_SET					0x06
#define	WPC_COM_AFC_DEBOUNCE			0x07 /* Data Values [ 0~1000mV : 0x0000~0x03E8 ], 2 bytes*/
#define	WPC_COM_SID_TAG					0x08
#define	WPC_COM_SID_TOKEN				0x09
#define	WPC_COM_TX_STANDBY				0x0A
#define	WPC_COM_LED_CONTROL				0x0B /* Data Value LED Enable(0x00), LED Disable(0xFF) */
#define	WPC_COM_REQ_AFC_TX				0x0C /* Data Value (0x00) */
#define	WPC_COM_COOLING_CTRL			0x0D /* Data Value ON(0x00), OFF(0xFF) */
#define	WPC_COM_CHG_LEVEL				0x0F /* Battery level */
#define	WPC_COM_ENTER_PHM				0x18 /* GEAR entered PHM */
#define	WPC_COM_DISABLE_TX				0x19 /* Turn off UNO of TX, OFF(0xFF) */

/* RX Data Value 2~5 Register (Data Sending), RX_Data_Value2_5_Out : Function and Description */
#define	RX_DATA_VAL2_5V					0x05
#define	RX_DATA_VAL2_10V				0x2C
#define	RX_DATA_VAL2_12V				0x4B

/* MFC_TX_DATA_COM_REG (0x58) : TX Command */
#define	WPC_TX_COM_UNKNOWN		0x00
#define	WPC_TX_COM_TX_ID		0x01
#define	WPC_TX_COM_AFC_SET		0x02
#define	WPC_TX_COM_ACK			0x03
#define	WPC_TX_COM_NAK			0x04
#define WPC_TX_COM_CHG_ERR		0x05
#define WPC_TX_COM_WPS		0x07
#define WPC_TX_COM_RX_POWER		0x0A

/* value of WPC_TX_COM_AFC_SET(0x02) */
#define TX_AFC_SET_5V			0x00
#define TX_AFC_SET_10V			0x01
#define TX_AFC_SET_12V			0x02
#define TX_AFC_SET_18V			0x03
#define TX_AFC_SET_19V			0x04
#define TX_AFC_SET_20V			0x05
#define TX_AFC_SET_24V			0x06

/* value of WPC_TX_COM_TX_ID(0x01) */
#define TX_ID_UNKNOWN				0x00
#define TX_ID_SNGL_PORT_START		0x01
#define TX_ID_VEHICLE_PAD			0x11
#define TX_ID_SNGL_PORT_END			0x1F
#define TX_ID_MULTI_PORT_START		0x20
#define TX_ID_MULTI_PORT_END		0x2F
#define TX_ID_STAND_TYPE_START		0x30
#define TX_ID_STAND_TYPE_END		0x3F
#define TX_ID_BATT_PACK_TA			0x41 /* 0x40 ~ 0x41 is N/C*/
#define TX_ID_BATT_PACK				0x42
#define TX_ID_BATT_PACK_END			0x4F /* reserved 0x40 ~ 0x4F for wireless battery pack */
#define TX_ID_DREAM_STAND			0x31
#define TX_ID_DREAM_DOWN			0x14
#define TX_ID_UNO_TX				0x72

#define TX_ID_AUTH_DUO_PAD			0xA0
#define TX_ID_AUTH_PAD_END			0xBF /* reserved 0xA1 ~ 0xBF for auth pad */

/* value of WPC_TX_COM_CHG_ERR(0x05) */
#define TX_CHG_ERR_OTP			0x12
#define TX_CHG_ERR_OCP			0x13
#define TX_CHG_ERR_DARKZONE		0x14
#define TX_CHG_ERR_FOD			0x20 ... 0x27

/* value of WPC_TX_COM_WPS 0x07) */
#define WPS_AICL_RESET		0x01

/* value of WPC_TX_COM_RX_POWER(0x0A) */
#define TX_RX_POWER_0W			0x0
#define TX_RX_POWER_3W			0x1E
#define TX_RX_POWER_5W			0x32
#define TX_RX_POWER_6_5W		0x41
#define TX_RX_POWER_7_5W		0x4B
#define TX_RX_POWER_10W			0x64
#define TX_RX_POWER_12W			0x78
#define TX_RX_POWER_15W			0x96
#define TX_RX_POWER_20W			0xC8

#define MFC_NUM_FOD_REG					12

/* BIT DEFINE of Command Register, COM_L(0x4E) */
#define MFC_CMD_TOGGLE_PHM_SHIFT			7
#define MFC_CMD_RESERVED6_SHIFT				6
#define MFC_CMD_CLEAR_INT_SHIFT				5
#define MFC_CMD_SEND_CHG_STS_SHIFT			4
#define MFC_CMD_SEND_EOP_SHIFT				3
#define MFC_CMD_MCU_RESET_SHIFT				2
#define MFC_CMD_TOGGLE_LDO_SHIFT			1
#define MFC_CMD_SEND_TRX_DATA_SHIFT			0
#define MFC_CMD_TOGGLE_PHM_MASK				(1 << MFC_CMD_TOGGLE_PHM_SHIFT)
#define MFC_CMD_RESERVED6_MASK				(1 << MFC_CMD_RESERVED6_SHIFT)
#define MFC_CMD_CLEAR_INT_MASK				(1 << MFC_CMD_CLEAR_INT_SHIFT)
#define MFC_CMD_SEND_CHG_STS_MASK			(1 << MFC_CMD_SEND_CHG_STS_SHIFT) /* MFC MCU sends ChgStatus packet to TX */
#define MFC_CMD_SEND_EOP_MASK				(1 << MFC_CMD_SEND_EOP_SHIFT)
#define MFC_CMD_MCU_RESET_MASK				(1 << MFC_CMD_MCU_RESET_SHIFT)
#define MFC_CMD_TOGGLE_LDO_MASK				(1 << MFC_CMD_TOGGLE_LDO_SHIFT)
#define MFC_CMD_SEND_TRX_DATA_MASK			(1 << MFC_CMD_SEND_TRX_DATA_SHIFT)

/* Command Register, COM_H(0x4F) */
#define MFC_CMD2_SEND_ADT_SHIFT				0
#define MFC_CMD2_SEND_ADT_MASK				(1 << MFC_CMD2_SEND_ADT_SHIFT)
#define MFC_CMD2_WP_ON_SHIFT				0
#define MFC_CMD2_WP_ON_MASK					(1 << MFC_CMD2_WP_ON_SHIFT)

/* Chip Revision and Font Register, Chip_Rev (0x02) */
#define MFC_CHIP_REVISION_MASK				0xf0
#define MFC_CHIP_FONT_MASK					0x0f

#define MFC_CMD2_ADT_SENT_SHIFT				1
#define MFC_CMD2_ADT_SENT_MASK				(1 << MFC_CMD2_WP_ON_SHIFT)

/* BIT DEFINE of Status Registers, Status_L (0x20), Status_H (0x21) */
#define MFC_STAT_L_STAT_VOUT_SHIFT				7
#define MFC_STAT_L_STAT_VRECT_SHIFT				6
#define MFC_STAT_L_OP_MODE_SHIFT				5
#define MFC_STAT_L_OVER_VOL_SHIFT				4
#define MFC_STAT_L_OVER_CURR_SHIFT				3
#define MFC_STAT_L_OVER_TEMP_SHIFT				2
#define MFC_STAT_L_TXCONFLICT_SHIFT				1
#define MFC_STAT_L_STAT_VOUT_MASK				(1 << MFC_STAT_L_STAT_VOUT_SHIFT)
#define MFC_STAT_L_STAT_VRECT_MASK				(1 << MFC_STAT_L_STAT_VRECT_SHIFT)
#define MFC_STAT_L_OP_MODE_MASK					(1 << MFC_STAT_L_OP_MODE_SHIFT)
#define MFC_STAT_L_OVER_VOL_MASK				(1 << MFC_STAT_L_OVER_VOL_SHIFT)
#define MFC_STAT_L_OVER_CURR_MASK				(1 << MFC_STAT_L_OVER_CURR_SHIFT)
#define MFC_STAT_L_OVER_TEMP_MASK				(1 << MFC_STAT_L_OVER_TEMP_SHIFT)
#define MFC_STAT_L_TXCONFLICT_MASK				(1 << MFC_STAT_L_TXCONFLICT_SHIFT)

#define MFC_STAT_H_TRX_DATA_RECEIVED_SHIFT		7
#define MFC_STAT_H_TX_OCP_SHIFT					6
#define MFC_STAT_H_TX_OVER_TEMP_SHIFT			5
#define MFC_STAT_H_TX_FOD_SHIFT					4
#define MFC_STAT_H_TX_CON_DISCON_SHIFT			3
#define MFC_STAT_H_AC_MISSING_DET_SHIFT			2
#define MFC_STAT_H_ADT_RECEIVED_SHIFT			1
#define MFC_STAT_H_ADT_SENT_SHIFT				0
#define MFC_STAT_H_TRX_DATA_RECEIVED_MASK		(1 << MFC_STAT_H_TRX_DATA_RECEIVED_SHIFT)
#define MFC_STAT_H_TX_OCP_MASK					(1 << MFC_STAT_H_TX_OCP_SHIFT)
#define MFC_STAT_H_TX_OVER_TEMP_MASK			(1 << MFC_STAT_H_TX_OVER_TEMP_SHIFT)
#define MFC_STAT_H_TX_FOD_MASK					(1 << MFC_STAT_H_TX_FOD_SHIFT)
#define MFC_STAT_H_TX_CON_DISCON_MASK			(1 << MFC_STAT_H_TX_CON_DISCON_SHIFT)
#define MFC_STAT_H_AC_MISSING_DET_MASK			(1 << MFC_STAT_H_AC_MISSING_DET_SHIFT)
#define MFC_STAT_H_ADT_RECEIVED_MASK			(1 << MFC_STAT_H_ADT_RECEIVED_SHIFT)
#define MFC_STAT_H_ADT_SENT_MASK				(1 << MFC_STAT_H_ADT_SENT_SHIFT)

/* BIT DEFINE of Interrupt_A Registers, INT_L (0x22), INT_H (0x23) */
#define MFC_INTA_L_STAT_VOUT_SHIFT				7
#define MFC_INTA_L_STAT_VRECT_SHIFT				6
#define MFC_INTA_L_OP_MODE_SHIFT				5
#define MFC_INTA_L_OVER_VOL_SHIFT				4
#define MFC_INTA_L_OVER_CURR_SHIFT				3
#define MFC_INTA_L_OVER_TEMP_SHIFT				2
#define MFC_INTA_L_TXCONFLICT_SHIFT				1
#define MFC_INTA_L_RESERVED0_SHIFT				0
#define MFC_INTA_L_STAT_VOUT_MASK				(1 << MFC_INTA_L_STAT_VOUT_SHIFT)
#define MFC_INTA_L_STAT_VRECT_MASK				(1 << MFC_INTA_L_STAT_VRECT_SHIFT)
#define MFC_INTA_L_OP_MODE_MASK					(1 << MFC_INTA_L_OP_MODE_SHIFT)
#define MFC_INTA_L_OVER_VOL_MASK				(1 << MFC_INTA_L_OVER_VOL_SHIFT)
#define MFC_INTA_L_OVER_CURR_MASK				(1 << MFC_STAT_L_OVER_CURR_SHIFT)
#define MFC_INTA_L_OVER_TEMP_MASK				(1 << MFC_STAT_L_OVER_TEMP_SHIFT)
#define MFC_INTA_L_TXCONFLICT_MASK				(1 << MFC_STAT_L_TXCONFLICT_SHIFT)
#define MFC_INTA_L_RESERVED0_MASK				(1 << MFC_STAT_L_RESERVED0_SHIFT)

#define MFC_INTA_H_TRX_DATA_RECEIVED_SHIFT		7
#define MFC_INTA_H_TX_OCP_SHIFT					6
#define MFC_INTA_H_TX_MODE_RX_NOT_DET			5
#define MFC_INTA_H_TX_FOD_SHIFT					4
#define MFC_INTA_H_TX_CON_DISCON_SHIFT			3
#define MFC_INTA_H_AC_MISSING_DET_SHIFT			2
#define MFC_INTA_H_ADT_RECEIVED_SHIFT			1
#define MFC_INTA_H_ADT_SENT_SHIFT				0
#define MFC_INTA_H_TRX_DATA_RECEIVED_MASK		(1 << MFC_INTA_H_TRX_DATA_RECEIVED_SHIFT)
#define MFC_INTA_H_TX_OCP_MASK					(1 << MFC_INTA_H_TX_OCP_SHIFT)
#define MFC_INTA_H_TX_MODE_RX_NOT_DET_MASK			(1 << MFC_INTA_H_TX_MODE_RX_NOT_DET)
#define MFC_INTA_H_TX_FOD_MASK					(1 << MFC_INTA_H_TX_FOD_SHIFT)
#define MFC_INTA_H_TX_CON_DISCON_MASK			(1 << MFC_INTA_H_TX_CON_DISCON_SHIFT)
#define MFC_INTA_H_AC_MISSING_DET_MASK			(1 << MFC_INTA_H_AC_MISSING_DET_SHIFT)
#define MFC_INTA_H_ADT_RECEIVED_MASK			(1 << MFC_INTA_H_ADT_RECEIVED_SHIFT)
#define MFC_INTA_H_ADT_SENT_MASK				(1 << MFC_INTA_H_ADT_SENT_SHIFT)

/* System Operating Mode Register, Sys_op_mode(0x2B) */
/* RX MODE[7:5] */
#define MFC_RX_MODE_AC_MISSING					0x0
#define MFC_RX_MODE_WPC_BASIC					0x1
#define MFC_RX_MODE_WPC_ADV						0x2
#define MFC_RX_MODE_PMA_SR1						0x3
#define MFC_RX_MODE_PMA_SR1E					0x4
#define MFC_RX_MODE_RESERVED1					0x5
#define MFC_RX_MODE_RESERVED2					0x6
#define MFC_RX_MODE_UNKNOWN						0x7
/* TX MODE[3:0] */
#define MFC_TX_MODE_BACK_PWR_MISSING			0x0
#define MFC_TX_MODE_MST_ON						0x4
#define MFC_TX_MODE_TX_MODE_ON					0x8
#define MFC_TX_MODE_TX_ERROR					0x9 /* TX FOD, TX conflict */
#define MFC_TX_MODE_TX_PWR_HOLD					0xA

/* End of Power Transfer Register, EPT (0x3B) (RX only) */
#define MFC_WPC_EPT_UNKNOWN						0
#define MFC_WPC_EPT_END_OF_CHG					1
#define MFC_WPC_EPT_INT_FAULT					2
#define MFC_WPC_EPT_OVER_TEMP					3
#define MFC_WPC_EPT_OVER_VOL					4
#define MFC_WPC_EPT_OVER_CURR					5
#define MFC_WPC_EPT_BATT_FAIL					6
#define MFC_WPC_EPT_RECONFIG					7
#define MFC_WPC_EPT_NO_RESPONSE					8

/* Proprietary Packet Header Register, PPP_Header VALUE(0x50) */
#define MFC_HEADER_END_SIG_STRENGTH			0x01 /* Message Size 1 */
#define MFC_HEADER_END_POWER_TRANSFER		0x02 /* Message Size 1 */
#define MFC_HEADER_END_CTR_ERROR			0x03 /* Message Size 1 */
#define MFC_HEADER_END_RECEIVED_POWER		0x04 /* Message Size 1 */
#define MFC_HEADER_END_CHARGE_STATUS		0x05 /* Message Size 1 */
#define MFC_HEADER_POWER_CTR_HOLD_OFF		0x06 /* Message Size 1 */
#define MFC_HEADER_PACKET_COUNTING			0x19 /* Message Size 1 */
#define MFC_HEADER_AFC_CONF					0x28 /* Message Size 2 */
#define MFC_HEADER_CONFIGURATION			0x51 /* Message Size 5 */
#define MFC_HEADER_IDENTIFICATION			0x71 /* Message Size 7 */
#define MFC_HEADER_EXTENDED_IDENT			0x81 /* Message Size 8 */

/* TX Data Command Register, TX Data_COM VALUE(0x50) */
#define MFC_TX_DATA_COM_TX_ID				0x01

/* END POWER TRANSFER CODES IN WPC */
#define MFC_EPT_CODE_UNKOWN				0x00
#define MFC_EPT_CODE_CHARGE_COMPLETE		0x01
#define MFC_EPT_CODE_INTERNAL_FAULT		0x02
#define MFC_EPT_CODE_OVER_TEMPERATURE		0x03
#define MFC_EPT_CODE_OVER_VOLTAGE			0x04
#define MFC_EPT_CODE_OVER_CURRENT			0x05
#define MFC_EPT_CODE_BATTERY_FAILURE		0x06
#define MFC_EPT_CODE_RECONFIGURE			0x07
#define MFC_EPT_CODE_NO_RESPONSE			0x08

#define MFC_POWER_MODE_MASK				(0x1 << 0)
#define MFC_SEND_USER_PKT_DONE_MASK		(0x1 << 7)
#define MFC_SEND_USER_PKT_ERR_MASK		(0x3 << 5)
#define MFC_SEND_ALIGN_MASK				(0x1 << 3)
#define MFC_SEND_EPT_CC_MASK				(0x1 << 0)
#define MFC_SEND_EOC_MASK					(0x1 << 0)

#define MFC_PTK_ERR_NO_ERR				0x00
#define MFC_PTK_ERR_ERR					0x01
#define MFC_PTK_ERR_ILLEGAL_HD			0x02
#define MFC_PTK_ERR_NO_DEF				0x03

#define MFC_FW_RESULT_DOWNLOADING			2
#define MFC_FW_RESULT_PASS				1
#define MFC_FW_RESULT_FAIL				0

enum {
	MFC_VOUT_5V = 0,	/* CC CALL, CV CALL */
	MFC_VOUT_5_5V,		/* CC-CV */
	MFC_VOUT_6V, // 2
	MFC_VOUT_7V, // 3
	MFC_VOUT_8V, // 4
	MFC_VOUT_9V, // 5
	MFC_VOUT_10V, // 6
};

/* PAD Vout */
enum {
	PAD_VOUT_5V = 0,
	PAD_VOUT_9V,
	PAD_VOUT_10V,
	PAD_VOUT_12V,
	PAD_VOUT_18V,
	PAD_VOUT_19V,
	PAD_VOUT_20V,
	PAD_VOUT_24V,
};

enum {
    MFC_ADC_VOUT = 0,
    MFC_ADC_VRECT,
    MFC_ADC_RX_IOUT,
    MFC_ADC_DIE_TEMP,
    MFC_ADC_OP_FRQ,
    MFC_ADC_TX_OP_FRQ,
    MFC_ADC_PING_FRQ,
    MFC_ADC_TX_IOUT,
    MFC_ADC_TX_VOUT,
};

enum {
	MFC_END_SIG_STRENGTH = 0,
	MFC_END_POWER_TRANSFER,			/* 1 */
	MFC_END_CTR_ERROR,				/* 2 */
	MFC_END_RECEIVED_POWER,			/* 3 */
	MFC_END_CHARGE_STATUS,			/* 4 */
	MFC_POWER_CTR_HOLD_OFF,			/* 5 */
	MFC_AFC_CONF_5V,				/* 6 */
	MFC_AFC_CONF_10V,				/* 7 */
	MFC_AFC_CONF_5V_TX,				/* 8 */
	MFC_AFC_CONF_10V_TX,			/* 9 */
	MFC_AFC_CONF_12V_TX,			/* 10 */
	MFC_CONFIGURATION,				/* 11 */
	MFC_IDENTIFICATION,				/* 12 */
	MFC_EXTENDED_IDENT,				/* 13 */
	MFC_LED_CONTROL_ON,				/* 14 */
	MFC_LED_CONTROL_OFF,			/* 15 */
	MFC_FAN_CONTROL_ON,				/* 16 */
	MFC_FAN_CONTROL_OFF,			/* 17 */
	MFC_REQUEST_AFC_TX,				/* 18 */
	MFC_REQUEST_TX_ID,				/* 19 */
	MFC_DISABLE_TX,					/* 20 */
	MFC_PHM_ON, 				/* 21 */
};

enum {
	MFC_ADDR,
	MFC_SIZE,
	MFC_DATA,
	MFC_PACKET,	
};

static const u8 mfc_idt_vout_val[] = {
 0x0F, 0x14, 0x19, 0x23, 0x2D, 0x37, 0x41,
};
static const u8 mfc_lsi_vout_val[] = {
 0x64, 0x6E, 0x78, 0x8C, 0xA0, 0xB4, 0xC8,
};

ssize_t mfc_show_attrs(struct device *dev,
				struct device_attribute *attr, char *buf);

ssize_t mfc_store_attrs(struct device *dev,
				struct device_attribute *attr,
				const char *buf, size_t count);

#define MFC_ATTR(_name)				\
{							\
	.attr = {.name = #_name, .mode = 0660},	\
	.show = mfc_show_attrs,			\
	.store = mfc_store_attrs,			\
}

enum mfc_irq {
	MFC_IRQ_STAT_VOUT = 0,
	MFC_IRQ_STAT_VRECT,
	MFC_IRQ_MODE_CHANGE,
	MFC_IRQ_TX_DATA_RECEIVED,
	MFC_IRQ_OVER_VOLT,
	MFC_IRQ_OVER_CURR,
	MFC_IRQ_OVER_TEMP,
	MFC_IRQ_TX_OVER_CURR,
	MFC_IRQ_TX_OVER_TEMP,
	MFC_IRQ_TX_FOD,
	MFC_IRQ_TX_CONNECT,
	MFC_IRQ_NR,
};

enum mfc_firmware_mode {
	MFC_RX_FIRMWARE = 0,
	MFC_TX_FIRMWARE,
};

enum mfc_ic_revision {
	MFC_IC_REVISION = 0,
	MFC_IC_FONT,
};

enum mfc_chip_id {
	MFC_CHIP_IDT = 0,
	MFC_CHIP_LSI,
};

enum mfc_headroom {
	MFC_HEADROOM_0 = 0,
	MFC_HEADROOM_1, /* 0.277V */
	MFC_HEADROOM_2, /* 0.497V */
	MFC_HEADROOM_3, /* 0.650V */
	MFC_HEADROOM_4, /* 0.030V */
	MFC_HEADROOM_5, /* 0.082V */
};

static const u8 MTPVerifier9320[] = {
        0x00, 0x02, 0x00, 0x20, 0x99, 0x00, 0x00, 0x00, 0x9D, 0x00, 0x00, 0x00, 0x9F, 0x00, 0x00, 0x00,
        0x00, 0xF0, 0x02, 0xF8, 0x00, 0xF0, 0x30, 0xF8, 0x0C, 0xA0, 0x30, 0xC8, 0x08, 0x38, 0x24, 0x18,
        0x2D, 0x18, 0xA2, 0x46, 0x67, 0x1E, 0xAB, 0x46, 0x54, 0x46, 0x5D, 0x46, 0xAC, 0x42, 0x01, 0xD1,
        0x00, 0xF0, 0x22, 0xF8, 0x7E, 0x46, 0x0F, 0x3E, 0x0F, 0xCC, 0xB6, 0x46, 0x01, 0x26, 0x33, 0x42,
        0x00, 0xD0, 0xFB, 0x1A, 0xA2, 0x46, 0xAB, 0x46, 0x33, 0x43, 0x18, 0x47, 0x64, 0x06, 0x00, 0x00,
        0x74, 0x06, 0x00, 0x00, 0x00, 0x23, 0x00, 0x24, 0x00, 0x25, 0x00, 0x26, 0x10, 0x3A, 0x01, 0xD3,
        0x78, 0xC1, 0xFB, 0xD8, 0x52, 0x07, 0x00, 0xD3, 0x30, 0xC1, 0x00, 0xD5, 0x0B, 0x60, 0x70, 0x47,
        0x1F, 0xB5, 0x1F, 0xBD, 0x10, 0xB5, 0x10, 0xBD, 0x00, 0xF0, 0xE9, 0xFA, 0x11, 0x46, 0xFF, 0xF7,
        0xF7, 0xFF, 0x00, 0xF0, 0x21, 0xFA, 0x00, 0xF0, 0x01, 0xFB, 0x03, 0xB4, 0xFF, 0xF7, 0xF2, 0xFF,
        0x03, 0xBC, 0x00, 0xF0, 0x05, 0xFB, 0x00, 0x00, 0x05, 0x48, 0x00, 0x47, 0xFE, 0xE7, 0xFE, 0xE7,
        0xFE, 0xE7, 0x00, 0x00, 0x03, 0x48, 0x04, 0x49, 0x02, 0x4A, 0x04, 0x4B, 0x70, 0x47, 0x00, 0x00,
        0x11, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x20, 0x60, 0x01, 0x00, 0x20, 0x60, 0x00, 0x00, 0x20,
        0xFE, 0xB5, 0x04, 0x46, 0x00, 0x20, 0x02, 0x90, 0x10, 0x20, 0x20, 0x40, 0x00, 0x28, 0x64, 0xD0,
        0x01, 0x20, 0xF7, 0x4E, 0x30, 0x80, 0x80, 0x1E, 0x30, 0x81, 0x01, 0x46, 0xF5, 0x4E, 0x31, 0x83,
        0x08, 0x0C, 0x70, 0x83, 0x00, 0x22, 0x44, 0xE0, 0xF3, 0x48, 0x40, 0x88, 0x80, 0x18, 0x83, 0xB2,
        0x01, 0x93, 0x98, 0x13, 0x00, 0x28, 0x03, 0xD1, 0x01, 0x20, 0xC0, 0x03, 0x18, 0x43, 0x01, 0x90,
        0xEC, 0x48, 0xC2, 0x81, 0x03, 0x80, 0xEB, 0x4E, 0x01, 0x98, 0x70, 0x80, 0x01, 0x98, 0x05, 0x78,
        0xE7, 0x48, 0x85, 0x80, 0x30, 0x46, 0x85, 0x80, 0x30, 0x20, 0x20, 0x40, 0x10, 0x28, 0x07, 0xD1,
        0x00, 0xBF, 0xE3, 0x48, 0x00, 0x88, 0x40, 0x06, 0xC0, 0x0F, 0x00, 0x28, 0xF9, 0xD1, 0x1E, 0xE0,
        0x00, 0x20, 0x00, 0x90, 0x18, 0xE0, 0xC8, 0x0F, 0x07, 0x27, 0x00, 0x9E, 0xBE, 0x1B, 0x2F, 0x46,
        0x37, 0x41, 0xFE, 0x07, 0xF6, 0x0F, 0x70, 0x40, 0x00, 0x28, 0x01, 0xD0, 0xDB, 0x48, 0x00, 0xE0,
        0x00, 0x20, 0x4E, 0x00, 0x70, 0x40, 0x01, 0x46, 0xD6, 0x4E, 0x31, 0x83, 0x08, 0x0C, 0x70, 0x83,
        0x00, 0x98, 0x40, 0x1C, 0xC0, 0xB2, 0x00, 0x90, 0x00, 0x98, 0x07, 0x28, 0xE3, 0xDD, 0x50, 0x1C,
        0x82, 0xB2, 0xD1, 0x48, 0x80, 0x88, 0x90, 0x42, 0xB6, 0xDC, 0x30, 0x20, 0x20, 0x40, 0x10, 0x28,
        0x13, 0xD1, 0xCB, 0x48, 0x00, 0x89, 0xCB, 0x4E, 0x70, 0x82, 0xC9, 0x48, 0x00, 0x89, 0xCA, 0x4E,
        0xF6, 0x88, 0xB0, 0x42, 0x02, 0xD1, 0x00, 0x20, 0x02, 0x90, 0x2F, 0xE0, 0x01, 0x20, 0x02, 0x90,
        0xC3, 0x48, 0x00, 0x89, 0xC4, 0x4E, 0xF0, 0x80, 0x28, 0xE0, 0x88, 0xB2, 0xC2, 0x4E, 0xF6, 0x88,
        0xB0, 0x42, 0x01, 0xD1, 0x01, 0x20, 0x00, 0xE0, 0x00, 0x20, 0x0E, 0x02, 0x36, 0x0E, 0xBE, 0x4F,
        0x3F, 0x7A, 0xBE, 0x42, 0x01, 0xD1, 0x01, 0x26, 0x00, 0xE0, 0x00, 0x26, 0x30, 0x40, 0x0E, 0x0E,
        0xB9, 0x4F, 0x7F, 0x7A, 0xBE, 0x42, 0x01, 0xD1, 0x01, 0x26, 0x00, 0xE0, 0x00, 0x26, 0x30, 0x40,
        0x00, 0x28, 0x02, 0xD0, 0x00, 0x20, 0x02, 0x90, 0x08, 0xE0, 0x01, 0x20, 0x02, 0x90, 0xB2, 0x4E,
        0xF1, 0x80, 0x08, 0x02, 0x00, 0x0E, 0x30, 0x72, 0x08, 0x0E, 0x70, 0x72, 0x02, 0x98, 0xFE, 0xBD,
        0x10, 0xB5, 0x02, 0x46, 0xAB, 0x4B, 0x1B, 0x8A, 0x04, 0x24, 0x23, 0x43, 0xA9, 0x4C, 0x23, 0x82,
        0x93, 0x00, 0x19, 0x60, 0xAA, 0x4B, 0x1B, 0x88, 0x64, 0x14, 0x23, 0x40, 0x18, 0x46, 0xA5, 0x4B,
        0x1B, 0x8A, 0x04, 0x24, 0xA3, 0x43, 0xA3, 0x4C, 0x23, 0x82, 0x10, 0xBD, 0x10, 0xB5, 0x02, 0x46,
        0xA0, 0x4B, 0x1B, 0x8A, 0x02, 0x24, 0x23, 0x43, 0x9E, 0x4C, 0x23, 0x82, 0x11, 0x70, 0xA0, 0x4B,
        0x1B, 0x88, 0x64, 0x14, 0x23, 0x40, 0x18, 0x46, 0x9A, 0x4B, 0x1B, 0x8A, 0x02, 0x24, 0xA3, 0x43,
        0x98, 0x4C, 0x23, 0x82, 0x10, 0xBD, 0xF1, 0xB5, 0x88, 0xB0, 0x08, 0x9E, 0x00, 0x20, 0x00, 0x90,
        0x94, 0x48, 0x00, 0x8A, 0x08, 0x21, 0x88, 0x43, 0x92, 0x49, 0x08, 0x82, 0x92, 0x48, 0x00, 0x88,
        0x00, 0x07, 0x00, 0x0F, 0x03, 0x90, 0x90, 0x48, 0x40, 0x88, 0x02, 0x90, 0x8E, 0x48, 0x80, 0x88,
        0x01, 0x90, 0x01, 0x99, 0x02, 0x98, 0x40, 0x18, 0x40, 0x1E, 0x80, 0xB2, 0x05, 0x90, 0x05, 0x98,
        0x80, 0x13, 0x00, 0x28, 0x04, 0xD1, 0x01, 0x21, 0xC9, 0x03, 0x05, 0x98, 0x08, 0x43, 0x05, 0x90,
        0x02, 0x98, 0x07, 0x90, 0x01, 0x99, 0x07, 0x98, 0x40, 0x18, 0x80, 0xB2, 0x07, 0x90, 0x00, 0x27,
        0x08, 0xE0, 0x81, 0x48, 0x08, 0x30, 0xC1, 0x5D, 0x07, 0x98, 0x08, 0x18, 0x80, 0xB2, 0x07, 0x90,
        0x78, 0x1C, 0x87, 0xB2, 0x01, 0x98, 0x87, 0x42, 0xF3, 0xDB, 0x7A, 0x49, 0x07, 0x98, 0x48, 0x82,
        0x79, 0x48, 0xC1, 0x88, 0x07, 0x98, 0x81, 0x42, 0x73, 0xD1, 0x03, 0x98, 0x01, 0x28, 0x01, 0xD1,
        0x00, 0x20, 0x0C, 0xE0, 0x03, 0x98, 0x03, 0x28, 0x01, 0xD1, 0x04, 0x20, 0x07, 0xE0, 0x03, 0x98,
        0x05, 0x28, 0x01, 0xD1, 0x24, 0x20, 0x02, 0xE0, 0x71, 0x48, 0x20, 0x30, 0x00, 0x89, 0x70, 0x49,
        0x20, 0x31, 0x08, 0x81, 0x00, 0x27, 0xC4, 0xE0, 0x02, 0x98, 0xC0, 0x19, 0x80, 0xB2, 0x06, 0x90,
        0x28, 0x0A, 0x69, 0x49, 0x08, 0x31, 0xC9, 0x5D, 0x09, 0x06, 0x08, 0x43, 0x05, 0x46, 0x06, 0x9C,
        0x64, 0x48, 0xC7, 0x81, 0x63, 0x49, 0x06, 0x98, 0x08, 0x80, 0x28, 0x0C, 0xC8, 0x80, 0x8D, 0x80,
        0x06, 0x98, 0x80, 0x13, 0x00, 0x28, 0x03, 0xD1, 0x89, 0x13, 0x06, 0x98, 0x08, 0x43, 0x04, 0x46,
        0x04, 0x98, 0x00, 0x0A, 0x21, 0x78, 0x09, 0x06, 0x08, 0x43, 0x04, 0x90, 0x59, 0x48, 0x44, 0x80,
        0x04, 0x98, 0x00, 0x0C, 0x57, 0x49, 0x48, 0x81, 0x04, 0x98, 0x08, 0x81, 0x03, 0x98, 0x01, 0x28,
        0x02, 0xD0, 0x03, 0x98, 0x03, 0x28, 0x16, 0xD1, 0x04, 0x98, 0x00, 0x0E, 0x29, 0x0E, 0x88, 0x42,
        0x0D, 0xD0, 0x29, 0x0E, 0x20, 0x46, 0xFF, 0xF7, 0x59, 0xFF, 0x00, 0x28, 0x08, 0xD1, 0x20, 0x78,
        0x04, 0x90, 0x29, 0x0E, 0x04, 0x98, 0x81, 0x42, 0x7F, 0xD0, 0x70, 0x1C, 0x86, 0xB2, 0x7C, 0xE0,
        0x70, 0x1C, 0x86, 0xB2, 0x79, 0xE0, 0x03, 0x98, 0x05, 0x28, 0x76, 0xD1, 0xA0, 0x07, 0x80, 0x0F,
        0x00, 0x28, 0x07, 0xD1, 0x01, 0x20, 0x00, 0x90, 0x42, 0x48, 0x00, 0x8A, 0x08, 0x21, 0x08, 0x43,
        0x40, 0x49, 0x08, 0x82, 0x43, 0x49, 0x05, 0x98, 0x08, 0x40, 0xA0, 0x42, 0x02, 0xD1, 0x01, 0x20,
        0x01, 0xE0, 0x6B, 0xE0, 0x00, 0x20, 0x05, 0x99, 0x89, 0x07, 0x89, 0x0F, 0x03, 0x29, 0x01, 0xD0,
        0x01, 0x21, 0x00, 0xE0, 0x00, 0x21, 0x08, 0x40, 0x00, 0x28, 0x07, 0xD0, 0x00, 0x20, 0x00, 0x90,
        0x34, 0x48, 0x00, 0x8A, 0x08, 0x21, 0x88, 0x43, 0x32, 0x49, 0x08, 0x82, 0x00, 0x98, 0x00, 0x28,
        0x23, 0xD1, 0x04, 0x98, 0xA8, 0x42, 0x48, 0xD0, 0x31, 0x48, 0x20, 0x30, 0x00, 0x89, 0x20, 0x21,
        0x88, 0x43, 0x2F, 0x49, 0x20, 0x31, 0x08, 0x81, 0x08, 0x46, 0x00, 0x89, 0x04, 0x21, 0x08, 0x43,
        0x2B, 0x49, 0x20, 0x31, 0x08, 0x81, 0x29, 0x0E, 0x20, 0x46, 0xFF, 0xF7, 0x07, 0xFF, 0x00, 0x28,
        0x08, 0xD1, 0x20, 0x78, 0x04, 0x90, 0x29, 0x0E, 0x04, 0x98, 0x81, 0x42, 0x2D, 0xD0, 0x70, 0x1C,
        0x86, 0xB2, 0x2A, 0xE0, 0x70, 0x1C, 0x86, 0xB2, 0x27, 0xE0, 0xA0, 0x07, 0x80, 0x0F, 0x03, 0x28,
        0x23, 0xD1, 0x04, 0x98, 0xA8, 0x42, 0x20, 0xD0, 0x1D, 0x48, 0x20, 0x30, 0x00, 0x89, 0x20, 0x21,
        0x08, 0x43, 0x1B, 0x49, 0x20, 0x31, 0x08, 0x81, 0x08, 0x46, 0x00, 0x89, 0x04, 0x21, 0x08, 0x43,
        0x17, 0x49, 0x20, 0x31, 0x08, 0x81, 0xA0, 0x10, 0x29, 0x46, 0xFF, 0xF7, 0xC9, 0xFE, 0x00, 0x28,
        0x09, 0xD1, 0xA0, 0x10, 0x80, 0x00, 0x00, 0x68, 0x04, 0x90, 0x04, 0x98, 0xA8, 0x42, 0x04, 0xD0,
        0x30, 0x1D, 0x86, 0xB2, 0x01, 0xE0, 0x30, 0x1D, 0x86, 0xB2, 0x0A, 0x48, 0x86, 0x81, 0x78, 0x1C,
        0x87, 0xB2, 0x01, 0x98, 0x87, 0x42, 0x00, 0xDA, 0x36, 0xE7, 0x06, 0xE0, 0x06, 0x48, 0x80, 0x88,
        0x80, 0x19, 0x86, 0xB2, 0x01, 0x20, 0xC0, 0x03, 0x06, 0x43, 0x30, 0x46, 0x09, 0xB0, 0xF0, 0xBD,
        0x00, 0x70, 0x00, 0x40, 0x00, 0x05, 0x00, 0x20, 0x00, 0x04, 0x00, 0x20, 0xB7, 0x1D, 0xC1, 0x04,
        0x00, 0x5C, 0x00, 0x40, 0xFC, 0xFF, 0x00, 0x00, 0x5A, 0x20, 0x58, 0x49, 0x08, 0x80, 0x05, 0x20,
        0x88, 0x80, 0x04, 0x20, 0x08, 0x81, 0x01, 0x20, 0x88, 0x81, 0x32, 0x20, 0x54, 0x49, 0x08, 0x80,
        0x93, 0x20, 0x54, 0x49, 0x08, 0x80, 0x20, 0x20, 0x08, 0x80, 0x08, 0x46, 0x80, 0x8A, 0x60, 0x21,
        0x88, 0x43, 0x50, 0x49, 0x88, 0x82, 0x20, 0x20, 0x4F, 0x49, 0x08, 0x80, 0x88, 0x80, 0x00, 0x20,
        0x4D, 0x49, 0x20, 0x31, 0x08, 0x80, 0x4D, 0x49, 0x08, 0x80, 0x48, 0x80, 0x00, 0x24, 0x00, 0x27,
        0x01, 0x25, 0x00, 0x26, 0x06, 0xE0, 0x00, 0x20, 0x71, 0x00, 0x49, 0x4A, 0x89, 0x18, 0x08, 0x80,
        0x70, 0x1C, 0x86, 0xB2, 0x10, 0x2E, 0xF6, 0xDB, 0x7E, 0xE0, 0x44, 0x48, 0x00, 0x88, 0xC0, 0x07,
        0xC0, 0x0F, 0x00, 0x28, 0x78, 0xD0, 0x41, 0x48, 0x00, 0x88, 0xC0, 0xB2, 0x3F, 0x49, 0x08, 0x80,
        0x3D, 0x48, 0x20, 0x30, 0x00, 0x88, 0x04, 0x21, 0x88, 0x43, 0x3B, 0x49, 0x20, 0x31, 0x08, 0x80,
        0x08, 0x46, 0x00, 0x88, 0x08, 0x21, 0x88, 0x43, 0x37, 0x49, 0x20, 0x31, 0x08, 0x80, 0x5A, 0x20,
        0x38, 0x49, 0x08, 0x82, 0x00, 0x20, 0x31, 0x49, 0x40, 0x31, 0x88, 0x81, 0x2F, 0x49, 0x60, 0x31,
        0x08, 0x80, 0x32, 0x48, 0x00, 0x88, 0x11, 0x21, 0x08, 0x40, 0x01, 0x28, 0x27, 0xD1, 0x01, 0x25,
        0x2E, 0x48, 0x00, 0x88, 0xC0, 0xB2, 0x29, 0x02, 0x08, 0x43, 0x2C, 0x49, 0x08, 0x80, 0x2C, 0x48,
        0x00, 0x8A, 0x01, 0x21, 0x08, 0x43, 0x2A, 0x49, 0x08, 0x82, 0x00, 0x20, 0xFF, 0xF7, 0x5B, 0xFE,
        0x04, 0x46, 0x27, 0x48, 0x00, 0x8A, 0xA8, 0x43, 0x25, 0x49, 0x08, 0x82, 0x60, 0x04, 0x40, 0x0C,
        0xC0, 0x19, 0x87, 0xB2, 0x88, 0x13, 0x20, 0x40, 0x00, 0x28, 0x01, 0xD0, 0x08, 0x20, 0x04, 0xE0,
        0x00, 0x2C, 0x01, 0xD0, 0x04, 0x20, 0x00, 0xE0, 0x02, 0x20, 0x05, 0x46, 0x11, 0xE0, 0x01, 0x25,
        0x1A, 0x48, 0x00, 0x88, 0xC0, 0xB2, 0x29, 0x02, 0x08, 0x43, 0x18, 0x49, 0x08, 0x80, 0x08, 0x88,
        0xFF, 0xF7, 0x6E, 0xFD, 0x04, 0x46, 0x00, 0x2C, 0x01, 0xD0, 0x04, 0x20, 0x00, 0xE0, 0x02, 0x20,
        0x05, 0x46, 0x12, 0x48, 0x47, 0x80, 0x00, 0x88, 0xFE, 0x21, 0x08, 0x40, 0x29, 0x02, 0x08, 0x43,
        0x0E, 0x49, 0x08, 0x80, 0x00, 0x2C, 0x07, 0xD0, 0x0B, 0x48, 0x20, 0x30, 0x00, 0x88, 0x08, 0x21,
        0x08, 0x43, 0x09, 0x49, 0x20, 0x31, 0x08, 0x80, 0x07, 0x48, 0x20, 0x30, 0x00, 0x88, 0x04, 0x21,
        0x08, 0x43, 0x05, 0x49, 0x20, 0x31, 0x08, 0x80, 0x7F, 0xE7, 0x00, 0x00, 0x00, 0x30, 0x00, 0x40,
        0x40, 0x54, 0x00, 0x40, 0x00, 0x58, 0x00, 0x40, 0x20, 0x6C, 0x00, 0x40, 0x00, 0x04, 0x00, 0x20,
        0x00, 0x05, 0x00, 0x20, 0x40, 0x5C, 0x00, 0x40, 0x70, 0x47, 0x70, 0x47, 0x70, 0x47, 0x75, 0x46,
        0x00, 0xF0, 0x22, 0xF8, 0xAE, 0x46, 0x05, 0x00, 0x69, 0x46, 0x53, 0x46, 0xC0, 0x08, 0xC0, 0x00,
        0x85, 0x46, 0x18, 0xB0, 0x20, 0xB5, 0xFF, 0xF7, 0x1D, 0xFD, 0x60, 0xBC, 0x00, 0x27, 0x49, 0x08,
        0xB6, 0x46, 0x00, 0x26, 0xC0, 0xC5, 0xC0, 0xC5, 0xC0, 0xC5, 0xC0, 0xC5, 0xC0, 0xC5, 0xC0, 0xC5,
        0xC0, 0xC5, 0xC0, 0xC5, 0x40, 0x3D, 0x49, 0x00, 0x8D, 0x46, 0x70, 0x47, 0x04, 0x46, 0xC0, 0x46,
        0xC0, 0x46, 0x20, 0x46, 0xFF, 0xF7, 0xF9, 0xFC, 0x00, 0x48, 0x70, 0x47, 0x00, 0x00, 0x00, 0x20,
        0x01, 0x49, 0x18, 0x20, 0xAB, 0xBE, 0xFE, 0xE7, 0x26, 0x00, 0x02, 0x00, 0x70, 0x47, 0x00, 0x00,
        0xC0, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x60, 0x01, 0x00, 0x00, 0x54, 0x00, 0x00, 0x00,
};

//////////////// updated MTP bootloader is here ////////////////////////
static const u8 MTPBootloader9320[] = {
	0x00, 0x04, 0x00, 0x20, 0xE7, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xFE, 0xE7, 0x00, 0x00, 0xF0, 0xB5, 0x46, 0x49, 0x00, 0x20, 0x0A, 0x88, 0x05, 0x46, 0x93, 0x06,
	0x00, 0xD5, 0x04, 0x20, 0xD2, 0x06, 0x07, 0xD5, 0x8A, 0x78, 0x0B, 0x79, 0x1A, 0x43, 0x92, 0x07,
	0x02, 0xD1, 0x20, 0x22, 0x10, 0x43, 0x01, 0x25, 0x3E, 0x4B, 0x5A, 0x22, 0x1A, 0x74, 0x3D, 0x4A,
	0x20, 0x3A, 0x10, 0x72, 0x02, 0x20, 0x40, 0x1C, 0x20, 0x28, 0xFC, 0xD3, 0xFF, 0x20, 0x3A, 0x4B,
	0x01, 0x30, 0x98, 0x81, 0x48, 0x88, 0xDC, 0x13, 0x04, 0x19, 0x00, 0x2D, 0x09, 0xD0, 0x00, 0x20,
	0x03, 0xE0, 0x45, 0x18, 0xAD, 0x68, 0x25, 0x50, 0x00, 0x1D, 0x8D, 0x88, 0x85, 0x42, 0xF8, 0xD8,
	0x08, 0xE0, 0x00, 0x20, 0x03, 0xE0, 0x45, 0x18, 0x2D, 0x7A, 0x25, 0x54, 0x40, 0x1C, 0x8D, 0x88,
	0x85, 0x42, 0xF8, 0xD8, 0x00, 0x20, 0x10, 0x72, 0x2C, 0x48, 0x98, 0x81, 0x02, 0x20, 0x00, 0x23,
	0x1A, 0x46, 0x0B, 0xE0, 0x57, 0x18, 0x3E, 0x7A, 0xA5, 0x5C, 0xAE, 0x42, 0x05, 0xD0, 0x3D, 0x72,
	0x00, 0x2B, 0x00, 0xD1, 0x4A, 0x80, 0x04, 0x20, 0x5B, 0x1C, 0x52, 0x1C, 0x8D, 0x88, 0x95, 0x42,
	0xF0, 0xD8, 0x8B, 0x80, 0xF0, 0xBD, 0x23, 0x49, 0x21, 0x48, 0x08, 0x60, 0x1E, 0x48, 0x5A, 0x21,
	0x40, 0x38, 0x01, 0x70, 0x08, 0x25, 0x85, 0x83, 0x01, 0x22, 0x02, 0x71, 0x05, 0x21, 0x01, 0x72,
	0x1D, 0x49, 0x81, 0x81, 0x16, 0x4C, 0x00, 0x21, 0x21, 0x80, 0xFF, 0x21, 0x49, 0x1E, 0xFD, 0xD1,
	0x01, 0x21, 0x1A, 0x4B, 0x49, 0x02, 0x99, 0x80, 0x49, 0x1E, 0x01, 0x82, 0x81, 0x8B, 0x11, 0x43,
	0x81, 0x83, 0x02, 0x26, 0x20, 0x78, 0xC0, 0x07, 0xFC, 0xD0, 0x60, 0x88, 0xA2, 0x88, 0x27, 0x46,
	0x10, 0x18, 0x81, 0xB2, 0x00, 0x20, 0x04, 0xE0, 0xC3, 0x19, 0x1B, 0x7A, 0x59, 0x18, 0x89, 0xB2,
	0x40, 0x1C, 0x82, 0x42, 0xF8, 0xD8, 0xF8, 0x88, 0x88, 0x42, 0x01, 0xD0, 0x25, 0x80, 0xE9, 0xE7,
	0x00, 0x2A, 0x03, 0xD0, 0xFF, 0xF7, 0x76, 0xFF, 0x38, 0x80, 0xE3, 0xE7, 0x26, 0x80, 0xE1, 0xE7,
	0x00, 0x04, 0x00, 0x20, 0x40, 0x5C, 0x00, 0x40, 0x40, 0x30, 0x00, 0x40, 0xFF, 0x01, 0x00, 0x00,
	0xFF, 0x0F, 0x00, 0x00, 0x80, 0xE1, 0x00, 0xE0, 0x04, 0x0E, 0x00, 0x00, 0x00, 0x34, 0x00, 0x40,
};

struct mfc_charger_platform_data {
	int pad_mode;
	int wpc_det;
	int irq_wpc_det;
	int wpc_int;
	int mst_pwr_en;
	int wpc_en;
	int irq_wpc_int;
	int cs100_status;
	int vout_status;
	int wireless_cc_cv;
	int siop_level;
	u8 capacity;
	int cable_type;
	bool default_voreg;
	int is_charging;
	u32 *fod_data_cv;
	u32 *fod_data;
	u32 *fod_hero_5v_data;
	u32 *fod_dream_data;
	u32 *fod_dream_cv_data;
	int fod_data_check;
	bool ic_on_mode;
	int hw_rev_changed; /* this is only for noble/zero2 */
	int otp_firmware_result;
	int tx_firmware_result;
	int wc_ic_grade;
	int wc_ic_rev;
	int otp_firmware_ver;
	int tx_firmware_ver;
	int vout;
	int vrect;
	u8 trx_data_cmd;
	u8 trx_data_val;
	char *wireless_charger_name;
	char *wired_charger_name;
	char *fuelgauge_name;
	int opfq_cnt;
	int mst_switch_delay;
	int wc_cover_rpp;
	int wc_hv_rpp;
};

#define mfc_charger_platform_data_t \
	struct mfc_charger_platform_data

#define MST_MODE_0			0
#define MST_MODE_2			1

struct mfc_charger_data {
	struct i2c_client				*client;
	struct device					*dev;
	mfc_charger_platform_data_t 	*pdata;
	struct mutex io_lock;
	const struct firmware *firm_data_bin;

	int wc_w_state;

	struct power_supply *psy_chg;
	struct wake_lock wpc_wake_lock;
	struct wake_lock wpc_tx_wake_lock;
	struct wake_lock wpc_rx_wake_lock;
	struct wake_lock wpc_update_lock;
	struct wake_lock wpc_opfq_lock;
	struct wake_lock wpc_tx_opfq_lock;
	struct wake_lock wpc_afc_vout_lock;
	struct wake_lock wpc_vout_mode_lock;
	struct wake_lock wpc_rx_det_lock;
	struct wake_lock wpc_tx_phm_lock;
	struct wake_lock wpc_vrect_check_lock;
	struct wake_lock wpc_tx_id_lock;
	struct workqueue_struct *wqueue;
	struct work_struct	wcin_work;
	struct delayed_work	wpc_det_work;
	struct delayed_work	wpc_opfq_work;
	struct delayed_work	wpc_isr_work;
	struct delayed_work	wpc_tx_isr_work;
	struct delayed_work	wpc_tx_id_work;
	struct delayed_work mst_off_work;
	struct delayed_work	wpc_int_req_work;
	struct delayed_work	wpc_fw_update_work;
	struct delayed_work	wpc_afc_vout_work;
	struct delayed_work	wpc_fw_booting_work;
	struct delayed_work	wpc_vout_mode_work;
	struct delayed_work	wpc_cm_fet_work;
	struct delayed_work wpc_i2c_error_work;
	struct delayed_work	wpc_rx_det_work;
	struct delayed_work wpc_tx_op_freq_work;
	struct delayed_work wpc_tx_phm_work;
	struct delayed_work wpc_vrect_check_work;

	struct alarm phm_alarm;

	u16 addr;
	int size;
	int is_afc;
	int pad_vout;
	int is_mst_on; /* mst */
	int chip_id;
	int fw_cmd;
	int vout_mode;
	int is_full_status;
	int mst_off_lock;
	bool is_otg_on;
	int led_cover;
	bool is_probed;
	bool is_afc_tx;
	bool tx_id_done;
	bool is_suspend;
	int tx_id;
	int tx_id_cnt;
	/* wireless tx */
	int tx_status;
	bool wc_tx_enable;
	int wc_rx_type;
	bool wc_rx_connected;
	bool wc_rx_fod;
	bool wc_ldo_status;
	int non_sleep_mode_cnt;
	u8 adt_transfer_status;
	u8 current_rx_power;
	u8 device_event;
	int i2c_error_count;
	unsigned long gear_start_time;
};

#endif /* __WIRELESS_CHARGER_MFC_H */
